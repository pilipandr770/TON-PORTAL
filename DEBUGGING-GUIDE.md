# Debugging Guide - Frontend Issues

## –ü—Ä–æ–±–ª–µ–º–∞
- –ö–Ω–æ–ø–∫–∞ "–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –≥–∞–º–∞–Ω–µ—Ü—å" –Ω–µ –ø—Ä–∞—Ü—é—î (–Ω—ñ—á–æ–≥–æ –Ω–µ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ)
- –ü—É–ª–∏ –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ `/pools`
- –ú–æ–∂–ª–∏–≤–∞ –ø—Ä–æ–±–ª–µ–º–∞: —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–æ –±–µ–∫–µ–Ω–¥—É –∞–±–æ JavaScript –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è

## –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Backend API (–ø—Ä–∞—Ü—é—î ‚úÖ)
Backend API –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ:
```bash
curl https://ton-portal.onrender.com/api/pools
# –ú–∞—î –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ JSON –∑ 2 –ø—É–ª–∞–º–∏
```

### 2. –î—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞

–°—Ç–≤–æ—Ä–µ–Ω–æ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—É debug —Å—Ç–æ—Ä—ñ–Ω–∫—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:

**URL:** `https://ton-portal.onrender.com/debug`

–¶—è —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î:
- ‚úÖ `/api/pools` - —á–∏ –ø—Ä–∞—Ü—é—î API
- ‚úÖ `TonConnectUI` - —á–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–ª–∞—Å—å –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞
- ‚úÖ `window.TonUI` - —á–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–≤—Å—è –Ω–∞—à –º–æ–¥—É–ª—å
- ‚úÖ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è TonConnect

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Console Logs

**–í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä (F12 ‚Üí Console) —ñ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏:**

#### –ù–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ `/dashboard`:
```javascript
// –ú–∞—î –±—É—Ç–∏:
"Dashboard DOMContentLoaded"
"window.TonUI available: true"
"Initializing TonUI dashboard..."
"Starting TonConnect UI initialization..."
"TonConnectUI class found, creating instance..."
"TonConnect UI initialized successfully"
"Fetching pools from /api/pools..."
"Pools data received: {items: [...]}
"Adding 2 pools to select"
```

#### –ù–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ `/pools`:
```javascript
// –ú–∞—î –±—É—Ç–∏:
"loadPools called"
"Fetching /api/pools..."
"Response status: 200"
"Pools data: {items: [...]}"
"Found 2 pools"
```

#### –Ø–∫—â–æ –ù–ï –ø—Ä–∞—Ü—é—î, —à—É–∫–∞–π—Ç–µ –ø–æ–º–∏–ª–∫–∏:
```javascript
// –ú–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏:
"TonConnect UI not loaded"
"window.TonUI not found"
"Error loading pools: ..."
"Failed to fetch"
```

## –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏ —ñ —Ä—ñ—à–µ–Ω–Ω—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: TonConnect UI script –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è

**–°–∏–º–ø—Ç–æ–º–∏ –≤ Console:**
```
TonConnect UI not loaded. Make sure the script is loaded.
typeof TonConnectUI === 'undefined'
```

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Network tab (F12 ‚Üí Network)
2. –®—É–∫–∞–π—Ç–µ –∑–∞–ø–∏—Ç –¥–æ: `unpkg.com/@tonconnect/ui@latest`
3. –Ø–∫—â–æ 404 –∞–±–æ timeout:
   - –ü—Ä–æ–±–ª–µ–º–∞ –∑ CDN
   - –†—ñ—à–µ–Ω–Ω—è: –°–∫–∞—á–∞—Ç–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É –ª–æ–∫–∞–ª—å–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞ 2: `tonconnect.js` –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è

**–°–∏–º–ø—Ç–æ–º–∏ –≤ Console:**
```
window.TonUI not found
```

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Network tab: `/static/js/tonconnect.js`
2. –°—Ç–∞—Ç—É—Å –º–∞—î –±—É—Ç–∏ `200 OK`
3. –Ø–∫—â–æ 404:
   - –§–∞–π–ª –Ω–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ —Ñ–∞–π–ª —î –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó
   - –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Render Build Logs

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Pools API –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î

**–°–∏–º–ø—Ç–æ–º–∏ –≤ Console:**
```
Error loading pools: Failed to fetch
Response status: 500
```

**–†—ñ—à–µ–Ω–Ω—è:**
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ API –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
   `https://ton-portal.onrender.com/api/pools`
2. –ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏ JSON –∑ –ø—É–ª–∞–º–∏
3. –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞ - –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ Render Logs

### –ü—Ä–æ–±–ª–µ–º–∞ 4: CORS –ø–æ–º–∏–ª–∫–∏

**–°–∏–º–ø—Ç–æ–º–∏ –≤ Console:**
```
CORS policy: No 'Access-Control-Allow-Origin'
```

**–†—ñ—à–µ–Ω–Ω—è:**
- –î–ª—è –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ —Ç–æ–π —Å–∞–º–∏–π –¥–æ–º–µ–Ω CORS –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω
- –Ø–∫—â–æ –±–∞—á–∏—Ç–µ CORS - –º–æ–∂–ª–∏–≤–æ –∑–∞–ø–∏—Ç –π–¥–µ –Ω–∞ —ñ–Ω—à–∏–π –¥–æ–º–µ–Ω
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `APP_URL` –≤ environment variables

### –ü—Ä–æ–±–ª–µ–º–∞ 5: Content Security Policy

**–°–∏–º–ø—Ç–æ–º–∏ –≤ Console:**
```
Refused to load script from 'https://unpkg.com/...'
Content Security Policy violation
```

**–†—ñ—à–µ–Ω–Ω—è:**
- –î–æ–¥–∞—Ç–∏ CSP –∑–∞–≥–æ–ª–æ–≤–∫–∏, —â–æ–± –¥–æ–∑–≤–æ–ª–∏—Ç–∏ unpkg.com

## –ö—Ä–æ–∫–∏ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### –ö—Ä–æ–∫ 1: –í—ñ–¥–∫—Ä–∏–π—Ç–µ Debug —Å—Ç–æ—Ä—ñ–Ω–∫—É
```
https://ton-portal.onrender.com/debug
```

–í–æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–∏ —ñ –ø–æ–∫–∞–∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏.

### –ö—Ä–æ–∫ 2: –í—ñ–¥–∫—Ä–∏–π—Ç–µ Console (F12)
1. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å F12 –≤ –±—Ä–∞—É–∑–µ—Ä—ñ
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
3. –û–Ω–æ–≤—ñ—Ç—å —Å—Ç–æ—Ä—ñ–Ω–∫—É (Ctrl+R / Cmd+R)
4. –°–∫–æ–ø—ñ—é–π—Ç–µ –í–°–Ü –ª–æ–≥–∏ —ñ –ø–æ–º–∏–ª–∫–∏

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Network
1. F12 ‚Üí –≤–∫–ª–∞–¥–∫–∞ **Network**
2. –û–Ω–æ–≤—ñ—Ç—å —Å—Ç–æ—Ä—ñ–Ω–∫—É
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–ª–∏—Å—å:
   - `tonconnect-ui.min.js` (–≤—ñ–¥ unpkg.com)
   - `tonconnect.js` (–≤—ñ–¥ –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
   - `/api/pools` (API –∑–∞–ø–∏—Ç)

### –ö—Ä–æ–∫ 4: –¢–µ—Å—Ç –Ω–∞ /dashboard
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ `https://ton-portal.onrender.com/dashboard`
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Console (F12)
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Wallet verbinden"
4. –î–∏–≤—ñ—Ç—å—Å—è –≤ Console - —â–æ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è?

–Ø–∫—â–æ –±–∞—á–∏—Ç–µ:
```javascript
"Connect button clicked"
"Opening modal..."
"Modal opened successfully"
```
–¢–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î! ‚úÖ

–Ø–∫—â–æ –±–∞—á–∏—Ç–µ –ø–æ–º–∏–ª–∫–∏ - —Å–∫–æ–ø—ñ—é–π—Ç–µ —ó—Ö –ø–æ–≤–Ω—ñ—Å—Ç—é.

## –õ–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–Ø–∫—â–æ –Ω–∞ Render –Ω–µ –ø—Ä–∞—Ü—é—î, —Å–ø—Ä–æ–±—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ:

```powershell
# –£ –ø–∞–ø—Ü—ñ –ø—Ä–æ–µ–∫—Ç—É
python -m flask run

# –í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
http://localhost:5000/debug
http://localhost:5000/dashboard
http://localhost:5000/pools
```

–Ø–∫—â–æ –ª–æ–∫–∞–ª—å–Ω–æ –ø—Ä–∞—Ü—é—î, –∞–ª–µ –Ω–∞ Render –Ω—ñ - –ø—Ä–æ–±–ª–µ–º–∞ –≤ deployment –∞–±–æ environment.

## –©–æ —è –¥–æ–¥–∞–≤ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

1. **–î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤ `tonconnect.js`:**
   - –ö–æ–∂–µ–Ω –∫—Ä–æ–∫ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
   - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ TonConnectUI
   - –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ –∑ stack trace

2. **–õ–æ–≥—É–≤–∞–Ω–Ω—è –≤ `dashboard.html`:**
   - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏
   - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—É–ª—ñ–≤ –∑ API
   - –ö–ª—ñ–∫–∏ –ø–æ –∫–Ω–æ–ø–∫–∞–º

3. **–õ–æ–≥—É–≤–∞–Ω–Ω—è –≤ `pools.html`:**
   - –í–∏–∫–ª–∏–∫ loadPools()
   - –í—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ API
   - –û–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö

4. **Debug —Å—Ç–æ—Ä—ñ–Ω–∫–∞ `/debug`:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ç–µ—Å—Ç–∏
   - Capture –≤—Å—ñ—Ö console logs
   - –í—ñ–∑—É–∞–ª—å–Ω—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ (‚úÖ / ‚ùå)

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ `/debug` –Ω–∞ Render**
2. **–°–∫–æ–ø—ñ—é–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—ñ–≤**
3. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ Console —ñ —Å–∫–æ–ø—ñ—é–π—Ç–µ –≤—Å—ñ –ª–æ–≥–∏**
4. **–ù–∞–¥—ñ—à–ª—ñ—Ç—å –º–µ–Ω—ñ –∑–Ω—ñ–º–æ–∫ –µ–∫—Ä–∞–Ω—É –∞–±–æ —Ç–µ–∫—Å—Ç**

–¶–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å —Ç–æ—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç–∏, –≤ —á–æ–º—É –ø—Ä–æ–±–ª–µ–º–∞! üîç
