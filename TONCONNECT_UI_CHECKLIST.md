# ‚úÖ TonConnect UI Integration - Testing Checklist

## –©–æ –±—É–ª–æ –∑—Ä–æ–±–ª–µ–Ω–æ:

### 1. **CSP –æ–Ω–æ–≤–ª–µ–Ω–æ** (`app.py`)
   - ‚úÖ –î–æ–¥–∞–Ω–æ `https://ton-connect.github.io` –¥–ª—è —Ä–µ—î—Å—Ç—Ä—É –≥–∞–º–∞–Ω—Ü—ñ–≤
   - ‚úÖ –î–æ–¥–∞–Ω–æ `https://*.tonkeeper.com` —Ç–∞ `https://*.tonhub.com` –¥–ª—è —ñ–∫–æ–Ω–æ–∫
   - ‚úÖ –î–æ–¥–∞–Ω–æ `https://cdn.jsdelivr.net` —è–∫ fallback CDN

### 2. **TonConnect UI –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ** (`base.html`)
   - ‚úÖ CDN loader –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º fallback (unpkg ‚Üí jsdelivr)
   - ‚úÖ –ü–æ—Å–ª—ñ–¥–æ–≤–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç—ñ–≤ (UI ‚Üí tonconnect.js ‚Üí tonconnect-ui-init.js)
   - ‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

### 3. **–ù–æ–≤–∏–π —Ñ–∞–π–ª UI —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó** (`static/js/tonconnect-ui-init.js`)
   - ‚úÖ –°—Ç–≤–æ—Ä—é—î –æ—Ñ—ñ—Ü—ñ–π–Ω—É –∫–Ω–æ–ø–∫—É TonConnect UI –∑ —ñ–∫–æ–Ω–∫–æ—é
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–∫–∞–∑—É—î QR-–∫–æ–¥ —Ç–∞ —Å–ø–∏—Å–æ–∫ –≥–∞–º–∞–Ω—Ü—ñ–≤ —É –º–æ–¥–∞–ª—ñ
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –±–∞–ª–∞–Ω—Å –ø—ñ—Å–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
   - ‚úÖ –ï–∫—Å–ø–æ—Ä—Ç—É—î `window.__tonConnectUI__` –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è—Ö

### 4. **Dashboard –æ–Ω–æ–≤–ª–µ–Ω–æ** (`templates/dashboard.html`)
   - ‚úÖ –í–∏–¥–∞–ª–µ–Ω–æ —Å—Ç–∞—Ä—ñ –∫–Ω–æ–ø–∫–∏ "Wallet verbinden" —ñ "Trennen"
   - ‚úÖ –î–æ–¥–∞–Ω–æ `<div id="tonconnect-ui-button"></div>` –¥–ª—è –æ—Ñ—ñ—Ü—ñ–π–Ω–æ—ó –∫–Ω–æ–ø–∫–∏

### 5. **–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó —Å–ø—Ä–æ—â–µ–Ω–æ** (`static/js/tonconnect.js`)
   - ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `window.__tonConnectUI__` –∑–∞–º—ñ—Å—Ç—å –≤–ª–∞—Å–Ω–æ—ó —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
   - ‚úÖ `sendStake()` –≤–∏–∫–ª–∏–∫–∞—î UI-–º–æ–¥–∞–ª –¥–ª—è –ø—ñ–¥–ø–∏—Å—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π

---

## üß™ –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞ Render:

### –ö—Ä–æ–∫ 1: –î–æ—á–µ–∫–∞—Ç–∏—Å—å –¥–µ–ø–ª–æ—é (2-3 —Ö–≤–∏–ª–∏–Ω–∏)
```
–í—ñ–¥–∫—Ä–∏–π—Ç–µ: https://ton-portal.onrender.com/dashboard
```

### –ö—Ä–æ–∫ 2: –í—ñ–¥–∫—Ä–∏—Ç–∏ Console (F12)
–®—É–∫–∞–π—Ç–µ —Ç–∞–∫—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:
```
‚úÖ TonConnect UI loaded from: https://unpkg.com/...
Initializing TonConnect UI...
TonConnect UI instance created successfully
TonConnect UI initialization complete
```

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–Ω–æ–ø–∫—É
–ù–∞ Dashboard –º–∞—î –∑'—è–≤–∏—Ç–∏—Å—å **—Å–∏–Ω—è –∫–Ω–æ–ø–∫–∞ –∑ –ª–æ–≥–æ—Ç–∏–ø–æ–º TON Connect** (–∑–∞–º—ñ—Å—Ç—å —Å—Ç–∞—Ä–∏—Ö –∫–Ω–æ–ø–æ–∫)

### –ö—Ä–æ–∫ 4: –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ –∫–Ω–æ–ø–∫—É
–ú–∞—î –≤—ñ–¥–∫—Ä–∏—Ç–∏—Å—å **–º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ** –∑:
- QR-–∫–æ–¥–æ–º –¥–ª—è –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –≥–∞–º–∞–Ω—Ü—è
- –°–ø–∏—Å–∫–æ–º –≥–∞–º–∞–Ω—Ü—ñ–≤ (Tonkeeper, Tonhub —Ç–æ—â–æ)
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—é –≤–∏–±—Ä–∞—Ç–∏ –≥–∞–º–∞–Ω–µ—Ü—å

### –ö—Ä–æ–∫ 5: –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –≥–∞–º–∞–Ω–µ—Ü—å
1. –°–∫–∞–Ω—É–π—Ç–µ QR-–∫–æ–¥ –∑ –º–æ–±—ñ–ª—å–Ω–æ–≥–æ (Tonkeeper/MyTonWallet)
2. –ê–±–æ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –Ω–∞–∑–≤—É –≥–∞–º–∞–Ω—Ü—è –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
3. **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –°—Ç–∞—Ç—É—Å: "Verbunden."
   - –ê–¥—Ä–µ—Å–∞: –ø–æ–∫–∞–∑–∞–Ω–∞ –≤–∞—à–∞ –∞–¥—Ä–µ—Å–∞
   - Balance: –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π
   - –ö–Ω–æ–ø–∫–∞ "Aktualisieren": –∞–∫—Ç–∏–≤–Ω–∞

### –ö—Ä–æ–∫ 6: –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Å—Ç–µ–π–∫—ñ–Ω–≥
1. –í–∏–±–µ—Ä—ñ—Ç—å –ø—É–ª –∑—ñ —Å–ø–∏—Å–∫—É
2. –í–≤–µ–¥—ñ—Ç—å —Å—É–º—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 1 TON)
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Delegieren"
4. **–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –í—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ TonConnect UI
   - –ü–æ–∫–∞–∑–∞–Ω–æ –¥–µ—Ç–∞–ª—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
   - –ú–æ–∂–Ω–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∞–±–æ —Å–∫–∞—Å—É–≤–∞—Ç–∏

---

## ‚ùå –©–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —è–∫—â–æ –Ω–µ –ø—Ä–∞—Ü—é—î:

### –ü–æ–º–∏–ª–∫–∞: "TonConnect UI konnte nicht geladen werden"
**Console –ø–æ–∫–∞–∑—É—î:**
```
‚ùå Failed to load from: https://unpkg.com/...
Trying next CDN...
‚ùå Failed to load from: https://cdn.jsdelivr.net/...
‚ùå All CDN sources failed
```

**–†—ñ—à–µ–Ω–Ω—è:**
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ CDN –¥–æ—Å—Ç—É–ø–Ω—ñ —É –≤–∞—à—ñ–π –∫—Ä–∞—ó–Ω—ñ/–º–µ—Ä–µ–∂—ñ
- –†–æ–∑–≥–ª—è–Ω—É—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–µ —Ö–æ—Å—Ç—É–≤–∞–Ω–Ω—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ (–≤–µ–Ω–¥–æ—Ä–∏–∑–∞—Ü—ñ—è)

### –ü–æ–º–∏–ª–∫–∞: CSP –±–ª–æ–∫—É—î –∑–∞–ø–∏—Ç–∏
**Console –ø–æ–∫–∞–∑—É—î:**
```
Refused to load ... because it violates the following Content Security Policy directive
```

**–†—ñ—à–µ–Ω–Ω—è:**
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ app.py - CSP –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–æ–º–µ–Ω–∏
- –î–æ–¥–∞—Ç–∏ –¥–æ–º–µ–Ω –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—ó –¥–∏—Ä–µ–∫—Ç–∏–≤–∏ CSP

### –ü–æ–º–∏–ª–∫–∞: –ö–Ω–æ–ø–∫–∞ –Ω–µ –∑'—è–≤–ª—è—î—Ç—å—Å—è
**–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:**
1. `<div id="tonconnect-ui-button"></div>` –≤—ñ–¥—Å—É—Ç–Ω—ñ–π —É dashboard.html
2. tonconnect-ui-init.js –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–≤—Å—è
3. TonConnectUI –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–ª–∞—Å—å –∑ CDN

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
```javascript
// –£ Console –≤–≤–µ–¥—ñ—Ç—å:
typeof TonConnectUI           // –ú–∞—î –±—É—Ç–∏ "function"
window.__tonConnectUI__        // –ú–∞—î –±—É—Ç–∏ –æ–±'—î–∫—Ç, –Ω–µ undefined
```

---

## üìä –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏:

‚úÖ **–í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π—à–ª–∏:** 11/11 passed  
‚úÖ **Commit —Å—Ç–≤–æ—Ä–µ–Ω–æ:** 1079804  
‚úÖ **Push —É—Å–ø—ñ—à–Ω–∏–π:** main -> main  
‚úÖ **CSP –æ–Ω–æ–≤–ª–µ–Ω–æ** –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –¥–æ–º–µ–Ω–∞–º–∏  
‚úÖ **UI –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∞** –∑ fallback  
‚úÖ **–û—Ñ—ñ—Ü—ñ–π–Ω–∞ –∫–Ω–æ–ø–∫–∞** –∑–∞–º—ñ—Å—Ç—å –∫–∞—Å—Ç–æ–º–Ω–∏—Ö  

---

## üöÄ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ):

1. **–í–µ–Ω–¥–æ—Ä–∏–∑–∞—Ü—ñ—è CDN** (—è–∫—â–æ CDN –Ω–µ–Ω–∞–¥—ñ–π–Ω—ñ):
   ```powershell
   # –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ TonConnect UI –ª–æ–∫–∞–ª—å–Ω–æ
   Invoke-WebRequest -Uri "https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js" -OutFile "static/js/vendor/tonconnect-ui.min.js"
   ```

2. **–î–æ–¥–∞—Ç–∏ analytics:**
   - –í—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ–¥–∫–ª—é—á–µ–Ω—å –≥–∞–º–∞–Ω—Ü—ñ–≤
   - –õ–æ–≥—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è CDN

3. **–ü–æ–∫—Ä–∞—â–∏—Ç–∏ UX:**
   - –î–æ–¥–∞—Ç–∏ loader –ø—ñ–¥ —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è UI
   - –ü–æ–∫–∞–∑–∞—Ç–∏ –ø—ñ–¥–∫–∞–∑–∫–∏ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
   - –î–æ–¥–∞—Ç–∏ multi-language –ø—ñ–¥—Ç—Ä–∏–º–∫—É –¥–ª—è –º–æ–¥–∞–ª—ñ–≤

---

## üìù –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ:

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ CDN:**
- Primary: https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js
- Fallback: https://cdn.jsdelivr.net/npm/@tonconnect/ui@latest/dist/tonconnect-ui.min.js

**–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:**
```
base.html (CDN loader)
    ‚Üì
TonConnect UI library loaded
    ‚Üì
tonconnect.js (helper functions)
    ‚Üì
tonconnect-ui-init.js (UI initialization)
    ‚Üì
window.__tonConnectUI__ exported
    ‚Üì
dashboard.html uses TonUI.sendStake()
```

**–†—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ SDK —Ç–∞ UI:**
- **@tonconnect/sdk** - –Ω–∏–∑—å–∫–æ—Ä—ñ–≤–Ω–µ–≤–µ —è–¥—Ä–æ (–≤–∂–µ –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è)
- **@tonconnect/ui** - –≥–æ—Ç–æ–≤–∏–π UI –∑ –∫–Ω–æ–ø–∫–∞–º–∏ —Ç–∞ –º–æ–¥–∞–ª–∞–º–∏ (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∑–∞—Ä–∞–∑)

---

–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è: 31 –∂–æ–≤—Ç–Ω—è 2025  
Commit: 1079804
